<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Ongoing Appointments</title>
</head>
<body>
<div class="space-y-6" th:fragment="ongoing" x-data="{showBillingDialog: false, selectedAppointment: null}">
    <div class="flex items-center justify-between">
        <h2 class="text-2xl font-bold tracking-tight">Ongoing Appointments</h2>
        <div class="px-3 py-1 border rounded-md flex items-center gap-1">
            <span>2 Active Appointments</span>
        </div>
    </div>

    <div class="grid gap-6 md:grid-cols-2">
        <!-- Appointment Cards -->
        <th:block th:each="i : ${#numbers.sequence(1, 2)}">
            <div class="bg-white rounded-lg shadow-sm border overflow-hidden">
                <div class="flex flex-row items-center justify-between p-4 border-b">
                    <div class="flex items-center gap-3">
                        <img alt="Customer Photo" class="w-10 h-10 rounded-full object-cover"
                             src="https://via.placeholder.com/40"/>
                        <h3 class="text-lg font-bold" th:text="${'Service ' + i}">Service</h3>
                    </div>
                    <div class="bg-blue-500 text-white text-xs px-2 py-1 rounded-full">In Progress</div>
                </div>

                <div class="p-4 space-y-4">
                    <div class="grid gap-4">
                        <!-- Date and Time -->
                        <div class="flex items-center gap-2">
                            <svg class="text-gray-500" fill="none" height="16" viewBox="0 0 24 24"
                                 width="16" xmlns="http://www.w3.org/2000/svg">
                                <path d="M8 7V3M16 7V3M7 11H17M5 21H19C20.1046 21 21 20.1046 21 19V7C21 5.89543 20.1046 5 19 5H5C3.89543 5 3 5.89543 3 7V19C3 20.1046 3.89543 21 5 21Z"
                                      stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"
                                      stroke-width="2"/>
                            </svg>
                            <span class="text-sm" th:text="${'May ' + (10 + i) + ', 2025'}">May 10, 2025</span>
                            <svg class="text-gray-500 ml-2" fill="none" height="16" viewBox="0 0 24 24"
                                 width="16" xmlns="http://www.w3.org/2000/svg">
                                <path d="M12 8V12L15 15M21 12C21 16.9706 16.9706 21 12 21C7.02944 21 3 16.9706 3 12C3 7.02944 7.02944 3 12 3C16.9706 3 21 7.02944 21 12Z"
                                      stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"
                                      stroke-width="2"/>
                            </svg>
                            <span class="text-sm" th:text="${(1 + i) + ':30 PM'}">2:30 PM</span>
                        </div>

                        <!-- Customer Information -->
                        <div class="space-y-2">
                            <div class="flex items-center gap-2">
                                <svg class="text-gray-500" fill="none" height="16" viewBox="0 0 24 24"
                                     width="16" xmlns="http://www.w3.org/2000/svg">
                                    <path d="M20 21V19C20 16.7909 18.2091 15 16 15H8C5.79086 15 4 16.7909 4 19V21M16 7C16 9.20914 14.2091 11 12 11C9.79086 11 8 9.20914 8 7C8 4.79086 9.79086 3 12 3C14.2091 3 16 4.79086 16 7Z"
                                          stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"
                                          stroke-width="2"/>
                                </svg>
                                <div class="font-medium">Customer</div>
                            </div>
                            <div class="text-sm pl-6" th:text="${'Customer ' + i}">Customer Name</div>
                            <div class="text-sm pl-6" th:text="${'+1 (555) ' + (100 + i) + '-' + (1000 + i)}">Phone
                                Number
                            </div>
                        </div>

                        <!-- Vehicle Information -->
                        <div class="space-y-2">
                            <div class="flex items-center gap-2">
                                <svg class="text-gray-500" fill="none" height="16" viewBox="0 0 24 24"
                                     width="16" xmlns="http://www.w3.org/2000/svg">
                                    <path d="M16 6L18 8M18 8L16 10M18 8H9M8 14L6 16M6 16L8 18M6 16H15M9 3H7.8C6.11984 3 5.27976 3 4.63803 3.32698C4.07354 3.6146 3.6146 4.07354 3.32698 4.63803C3 5.27976 3 6.11984 3 7.8V16.2C3 17.8802 3 18.7202 3.32698 19.362C3.6146 19.9265 4.07354 20.3854 4.63803 20.673C5.27976 21 6.11984 21 7.8 21H16.2C17.8802 21 18.7202 21 19.362 20.673C19.9265 20.3854 20.3854 19.9265 20.673 19.362C21 18.7202 21 17.8802 21 16.2V15"
                                          stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"
                                          stroke-width="2"/>
                                </svg>
                                <div class="font-medium">Vehicle</div>
                            </div>
                            <div class="flex items-center gap-3 pl-6">
                                <img alt="Vehicle" class="w-16 h-12 object-contain"
                                     src="https://via.placeholder.com/160x120"/>
                                <div>
                                    <div class="text-sm" th:text="${'Vehicle ' + i + ' (2023)'}">Vehicle Make Model
                                    </div>
                                    <div class="text-sm">
                                        License Plate: <span class="font-medium"
                                                             th:text="${'ABC-' + (100 + i)}">ABC-123</span>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Services -->
                        <div class="space-y-2">
                            <div class="font-medium">Services</div>
                            <div class="text-sm bg-gray-100 px-2 py-1 rounded-full inline-block"
                                 th:text="${'Service Type ' + i}">
                                Service Type
                            </div>
                        </div>
                    </div>

                    <!-- Action Button -->
                    <div class="flex justify-between items-center pt-2">
                        <button @click="showBillingDialog = true; selectedAppointment = $el.closest('.bg-white')"
                                class="flex items-center justify-center w-full px-6 py-2.5 text-center text-black duration-200 bg-transparent border-2 border-black rounded-full hover:bg-black hover:text-white focus:outline-none focus-visible:outline-black text-sm focus-visible:ring-black gap-2">
                            <svg fill="none" height="16" viewBox="0 0 24 24" width="16"
                                 xmlns="http://www.w3.org/2000/svg">
                                <path d="M12 1V23M17 5H9.5C8.57174 5 7.6815 5.36875 7.02513 6.02513C6.36875 6.6815 6 7.57174 6 8.5C6 9.42826 6.36875 10.3185 7.02513 10.9749C7.6815 11.6313 8.57174 12 9.5 12H14.5C15.4283 12 16.3185 12.3687 16.9749 13.0251C17.6313 13.6815 18 14.5717 18 15.5C18 16.4283 17.6313 17.3185 16.9749 17.9749C16.3185 18.6313 15.4283 19 14.5 19H6"
                                      stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"
                                      stroke-width="2"/>
                            </svg>
                            Finalize Bill
                        </button>
                    </div>
                </div>
            </div>
        </th:block>
    </div>

    <!-- Billing Dialog -->
    <div class="fixed inset-0 z-50 flex items-center justify-center p-4 bg-black bg-opacity-50"
         x-show="showBillingDialog">
        <div @click.away="showBillingDialog = false" class="bg-white rounded-lg shadow-lg max-w-md w-full">
            <div class="p-6">
                <h3 class="text-lg font-medium mb-4">Finalize Bill</h3>

                <div class="space-y-4">
                    <div class="space-y-2">
                        <label class="block text-sm font-medium" for="labor-cost">Labor Cost ($)</label>
                        <input class="w-full px-3 py-2 border rounded-md" id="labor-cost" placeholder="0.00"
                               type="number"/>
                    </div>

                    <div class="space-y-2">
                        <label class="block text-sm font-medium" for="parts-cost">Parts Cost ($)</label>
                        <input class="w-full px-3 py-2 border rounded-md" id="parts-cost" placeholder="0.00"
                               type="number"/>
                    </div>

                    <div class="space-y-2">
                        <label class="block text-sm font-medium" for="additional-fees">Additional Fees ($)</label>
                        <input class="w-full px-3 py-2 border rounded-md" id="additional-fees" placeholder="0.00"
                               type="number"/>
                    </div>

                    <div class="space-y-2">
                        <label class="block text-sm font-medium" for="notes">Notes</label>
                        <textarea class="w-full px-3 py-2 border rounded-md min-h-[80px]" id="notes"
                                  placeholder="Enter service details and notes"></textarea>
                    </div>

                    <div class="flex justify-between pt-4">
                        <button @click="showBillingDialog = false"
                                class="flex items-center justify-center px-6 py-2.5 text-center text-black duration-200 bg-transparent border-2 border-black rounded-full hover:bg-gray-100 focus:outline-none focus-visible:outline-black text-sm focus-visible:ring-black">
                            Cancel
                        </button>
                        <button class="flex items-center justify-center px-6 py-2.5 text-center text-white duration-200 bg-black border-2 border-black rounded-full hover:bg-transparent hover:text-black focus:outline-none focus-visible:outline-black text-sm focus-visible:ring-black">
                            Complete & Save
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
</body>
</html>